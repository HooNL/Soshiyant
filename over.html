<!DOCTYPE html>
<html>
<head lang="nl">
	<meta charset="UTF-8">
	<title>HTML5 localStorage</title>
	<style>
		body {
			font-family: Arial, Helvetica, Sans-Serif;
		}
	</style>
</head>
<body>
<!-- HTML-code -->
<h2>Formuliergegevens opslaan in localStorage</h2>
<!-- Panel waarin om naam wordt gevraagd -->
<div id="askName">
	Uw naam:
	<input type="text" id="txtName" placeholder="Uw naam..."/>
	<button id="btnStoreName">Naam opslaan</button>
</div>

<!-- Panel waarin naam wordt getoond, indien bekend-->
<div id="divName">
	<h3>Welkom terug, <span id="labelName"></span>!</h3>
</div>
<hr/>
<button id="btnClearStorage">Leegmaken</button>

<!-- Scriptcode -->
<script>
	// We gaan er van uit dat localStorage beschikbaar is.
	// Anders hierop testen met if(window.localStorage)...
	window.onload = function () {
		// 0. Initialisatie - caching van elementen op de pagina
		var txtName = document.getElementById('txtName');
		var askName = document.getElementById('askName');
		var divName = document.getElementById('divName');
		var labelName = document.getElementById('labelName');
		var btnStoreName = document.getElementById('btnStoreName');
		var btnClearStorage = document.getElementById('btnClearStorage');

		// 1. check of al een naam is opgegeven
		var storage = window.localStorage;
		if (!storage.getItem('naam')) {
			// Nee. Panel tonen en om naam vragen
			getName();
		} else {
			// Ja. Naam tonen
			showName();
		}

		// 2. Naam opslaan in local storage
		btnStoreName.addEventListener('click', function () {
			localStorage.setItem('naam', txtName.value);
			alert('Uw naam wordt opgeslagen');
			showName();
		});

		// 3. panel tonen en om naam vragen
		function getName() {
			askName.style.display = "block";
			divName.style.display = "none";
			txtName.value = "";
		}

		// 4. panel met formulier verbergen en naam tonen
		function showName() {
			askName.style.display = "none";
			divName.style.display = "block";
			labelName.innerHTML = storage.naam;
		}

		// 5. Storage leegmaken
		btnClearStorage.addEventListener('click', function () {
			window.localStorage.clear();
			alert('Storage leeggemaakt');
			askName.style.display = "block";
			divName.style.display = "none";
			txtName.value = "";
		})
	}
</script>

</body>
</html>